"use strict";var myApp=angular.module("myApp",["ui.router","myControllers","myServices","builder","builder.components","validator.rules","ui.bootstrap"]),myServices=angular.module("myServices",["ngResource"]),myControllers=angular.module("myControllers",[]);angular.module("myApp").config(function(e,o){o.otherwise("/"),e.state("root",{url:"/",templateUrl:"templates/index.html",controller:"IndexController",resolve:{retros:function(e,o){var t=e.defer();return o.query().$promise.then(function(e){t.resolve(e)}),t.promise}}}).state("retros",{templateUrl:"templates/retros/base.html"}).state("retros.index",{url:"/retros",templateUrl:"templates/retros/index.html",controller:"IndexController",resolve:{retros:function(e,o){var t=e.defer();return o.query().$promise.then(function(e){t.resolve(e)}),t.promise}}}).state("retros.new",{url:"/retros/new",templateUrl:"templates/retros/new.html",controller:"NewController"}).state("retros.show",{url:"/retros/:id",templateUrl:"templates/retros/show.html",controller:"ShowController",resolve:{retro:function(e,o,t){var r=e.defer();return o.get({id:t.id}).$promise.then(function(e){r.resolve(e)}),r.promise},responses:function(e,o,t){var r=e.defer();return o.all({retro_id:t.id}).$promise.then(function(e){r.resolve(e.responses)}),r.promise}}})}),angular.module("myApp").controller("ModalDemoCtrl",function(e,o,t){e.items=["item1","item2","item3"],e.animationsEnabled=!0,e.open=function(r){var n=o.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:r,resolve:{items:function(){return e.items}}});n.result.then(function(o){e.selected=o},function(){t.info("Modal dismissed at: "+new Date)})},e.toggleAnimation=function(){e.animationsEnabled=!e.animationsEnabled}}),angular.module("myApp").controller("ModalInstanceCtrl",function(e,o,t){e.items=t,e.selected={item:e.items[0]},e.ok=function(){o.close(e.selected.item)},e.cancel=function(){o.dismiss("cancel")}}),myControllers.controller("FormCanvasController",["$scope","Retro","$builder","$validator","$location",function(e,o,t,r,n){e.formCanvas=t.forms["default"],e.input=[],e.defaultValue={},this.submit=function(t,r,s){if(r){var l=new o;l.title=t.title,l.form=angular.toJson(e.formCanvas),l.$save().then(function(e){console.log("data"),console.log(n.path("/"))})}}}]),myControllers.controller("FormConsumeController",["$scope","Response",function(e,o){this.submit=function(e,t,r){var n=new o;n.retro_id=e._id,n.input=angular.toJson(t),n.$save().then(function(e){console.log(e)}),console.log(n)}}]),myControllers.controller("IndexController",["$scope","retros","Retro",function(e,o,t){e.retros=o,e["delete"]=function(o){var r=e.retros.indexOf(o),n=new t;n.$delete({id:o._id}).then(function(o){e.retros.splice(r,1)})}}]),myControllers.controller("NewController",["$scope",function(e){}]),myControllers.controller("ShowController",["$scope","retro","responses","$builder","$validator","socketio",function(e,o,t,r,n,s){e.retro=o,e.responses=t;var l=angular.fromJson(o.form);r.forms["default"]=l,e.messages=["hello"],console.log("reminder: There is an instance of socketio attached to window"),window.socketio=s,s.on("send:message",function(o){console.log("send:message",o),console.log("$scope.messages",e.messages),e.messages.push(o)}),e.submit=function(o,t){s.emit("send:message",{message:o.body}),e.messages.push({user:e.name,text:o.body}),o.body=""}}]),myServices.factory("Response",["$resource",function(e){return e("/responses/:id",{},{all:{method:"get"}})}]),myServices.factory("Retro",["$resource",function(e){return e("/retros/:id")}]),myServices.factory("socketio",function(e){var o=io.connect();return{on:function(t,r){o.on(t,function(){var t=arguments;e.$apply(function(){r.apply(o,t)})})},emit:function(t,r,n){o.emit(t,r,function(){var t=arguments;e.$apply(function(){n&&n.apply(o,t)})})}}});